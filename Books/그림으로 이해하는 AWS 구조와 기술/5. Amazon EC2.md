# Amazon EC2(Elastic Compute Cloud)란

* 컴퓨팅 용량을 제공하는 서비스로 서버에 필요한 세트를 클라우드에서 빌림.
    * 빌린 도구를 사용하여 자신의 서버를 만듦.
* EC2는 매니지드 서비스가 아니기 때문에 OS, 소프트웨어는 사용자가 직접 설치하고 운영.
    * AWS는 서버 및 네트워크 운영까지만 담당.
    * 자유도가 높은 반면 관리하기가 번거로움.
    * 어떻게 구상할지 어느 정도의 성능이 필요할지 설계적인 관점이 필요.

## EC2에 서버를 생성하는 장점

* 누구든지 바로 사용 가능
    * 클릭 한 번으로 생성. (관리 콘솔)
    * 준비된 것을 선택할 수 있음. (AMI, 인스턴스 유형)
    * 나중에 변경이 쉬움. (관리 콘솔, 인스턴스 유형)
* 여러 가지 선택 가능
    * CPU와 메모리 사양이 다양함. (인스턴스 유형)
    * OS나 소프트웨어의 종류 다양함. (AMI)
    * 연계하고 싶은 기능도 충실함. (다른 AWS 서비스)
* 백업 쉬움 (가상화 기술)
* 어디서든 접속 (클라우드)
* 물리적으로 다른 여러 장소에 설치 가능 (리전과 가용 영역)

## 편리한 서버 생성과 삭제의 장점

* 불필요한 리소스를 유지할 필요 없음.
* 서버에 문제가 생겨도 즉시 복구.
* 복제 및 스케일 아웃, 스케일 다운.
* 테스트를 위한 임시 서버.
* 불확실성이 많은 경우에 매우 유용.
    * 접속량이 얼마일지, 서버 사양이 얼마나 필요할지 등.
* 전문 지식 없이 쉽게 서버 생성 가능.

<br/>

# EC2 사용

## 설치

* 물리적인 작업(케이블 연결 등) : 관리콘솔
* 소프트웨어적인 작업(OS 설치 등) : SSH를 통한 원격 (클라우드가 아니 환경과 같음)

## 주요 기능

|항목|내용|
|---|---|
|인스턴스|AWS 클라우드에 생성한 가상 서버.<br/>AMI로 같은 구성의 서버를 몇 번이고 생성 가능.|
|AMI|가상 이미지로 인스턴스 생성의 금형과 같음. (java의 class)<br/>OS만 설치된 유형부터 SW도 설정된 유형까지 다양.|
|키 페어|인스턴스 접속을 위한 인증에 사용하는 키|
|EBS|AWS 클라우드에서 사용할 수 있는 스토리지.<br/>인스턴스 스토리지로 사용.|
|보안 그룹|가상 방화벽으로 1개 이상의 인스턴스 트래픽을 제한.|
|Elastic IP|정적(고정) IPv4 주소.|

## EC2 사용 절차

1. AWS에 로그인
    * 리전 선택, 관리 콘솔 오픈.
    * EC2 대시보드 오픈.
1. EC2 인스턴스 생성
    * AMI 선택.
    * 인스턴스 유형 선택.
    * 네트워크와 IP 주소 할당.
    * 스토리지 추가.
    * 보안 그룹 설정.
    * 키 페어 선택(작성).
1. EC2 접속
    * SSH로 접속.
1. 소프트웨어 설치 및 설정

## 인스턴스 설정 항목

* 일반적인 서버 생성처럼 CPU, 메모리, OS, 웹 서버 종류 등을 검토해야 함.
* AWS에서는 다양한 인스턴스 유형, AMI를 제공하므로 적당한것을 골라도 됨.

|항목|내용|
|---|---|
|AMI|OS, SW 등 어떤 인스턴스를 만들 것인지 정하고 해당하는 AMI 선택.|
|인스턴스 유형|인스턴스의 장비 사양.<br/> CPU, 메모리, 장비 유형을 결정.|
|리전|서버를 설치할 지역.<br/>전 세계에 이중화를 고려한 경우는 다른 나라에도 설치.|
|네트워크|EC2 인스턴스를 배치할 네트워크.<br/>AWS의 VPC(AWS 계정 전용 가상 네트워크)에서 선택.<br/>|
|서브넷|설치할 네트워크 범위.<br/>VPC내에 어떤 서브넷을 설치할지 선택.<br/>서브넷 선택이후 가용 영역이라고 하는 설치 장소와 어떤 범위에 사설 IP가 부여될지 결정.|
|IAM 역할|인스턴스의 접속 권한 정책 설정.<br/>다른 서비스에 접속하고 싶을때 할당.|
|스토리지의 용량과 종류|서버 장비의 스토리지로 OS가 설치된 장소에 있음.<br/>기본적으로 EBS를 선택하고 사용할 디스크 용량과 스토리지의 종류 선택.<br/>용도에 따라 인스턴스 스토어(전원이 끊기면 데이터가 1사라지지만 읽기 성능이 빠름)를 선택.<br/>S3같은 외부 스토리지는 선택 불가.|
|태그(EC2 인스턴스의 레이블)|인스턴스에 임의의 태그 부여.|
|보안 그룹|프로토콜별로 포트나 IP 주소, 또는 양쪽 모두 필터링 설정.|
