# Amazon RDS(Relational Database Service)

* 관계형 데이터베이스 6종류의 제품을 클라우드에 최적화된 상태로 제공.
    * 메모리, 성능, I/O 등이 최적화.
* Amazon Aurora, PostgreSQL, MySQL, MariaDB, Oracle, SQL Server 지원.
* 제공 방식은 EC2처럼 VPC상에 인스턴스 형태로 구축하며 다양한 인스턴스 클래스 존재.
* EC2와 다른점은 매니지드 서비스로 AWS에 의해 업데이트등의 관리가 자동.
    * 백업처럼 번거로운 관리 작업도 자동화.
* DMS(Database Migration Server)로 기존 DB를 이전하거나 복제도 가능.

## 인스턴스 클래스

|용도|인스턴스 클래스|내용|
|---|---|---|
|표준|db.m5 등|범용적인 인스턴스 클래스|
|메모리 최적화|db.x1e|메모리를 많이 사용하는 애플리케이션에 최적화.<br/>일부 리전만 제공, 한국도 가능.|
|메모리 최적화|db.x1|메모리를 많이 사용하는 애플리케이션에 최적화.<br/>메모리 최대치가 db.x1e의 절반.|
|메모리 최적화|db.r5 등|네트워크와 EBS의 성능을 강화.<br/>AWS Nitro System을 사용.|
|버스트 성능|db.t3 등|CPU의 최대 사용률까지 버스트 성능으로 사용.|

* 인스턴스 클래스에 따라 지원하지 않는 DBMS나 버전도 존재.
* 데이터베이스 인스턴스는 VPC에 설치해야 함.

## RDS 요금

* DBMS에 따라 요금이 다름.
* DBMS는 무료와 유료가 있고 유료는 라이선스 사용료 인스턴스 요금에 포함되어서 부과.
* 스토리지 요금 + 데이터베이스 인스턴스 요금 + 백업 스토리지 요금 + 통신료

### 스토리지 요금

* 사용하고 있는 스토리지에 대한 요금.
* 실제 사용한 용량이 아닌 확보하고 있는 용량에 대해 과금.

### 데이터베이스 인스턴스 요금(DBMS 라이선스 요금 포함)

* EC2처럼 가동한 시간당 요금이 부과.
* 고성능 인스턴스일수록 요금이 비쌈.
* 이중화 구축 여부와 사용할 데이터베이스 엔진(DBMS)에 따라 요금이 다름.
* 다중 AZ로 구성하여 이중화하면 단일 AZ보다 약 2배 요금 부과.
* 유료 DBMS는 라이선스 비용까지 청구되어 오픈 소스보다 비쌈.

#### ※ 다중 AZ

* AZ란 가용 영역의 약자.
* 단일 AZ 구성은 한 곳에 가용 영역을 구축.
* 다중 AZ 구성은 여러 가용 영역에 구축하여 이중화 구성.
* 장애가 발생하여 중단되면 안 되는 서비스면 다중 AZ 구성 필요.

### 백업 스토리지 요금

* 데이터베이스 인스턴스 백업 가능. (스냅샷)
* 스냅샷은 백업 스토리지라고 하는 장소에 생성, 샤용 용량에 따라 요금 부과.
* 스냅샷 요금은 리전의 데이터베이스 스토리지 크기의 100%를 넘을 경우만 발생.
    * 20GB로 운영중일때 스냅샷의 용량이 20GB를 넘지 않으면 부과 X.

### 통신료

* 데이터베이스 인스턴스가 인터넷으로 통신할 경우 해당 전송량에 대해 부과.
* AZ 내에서만 통신하면 부과되지 않음.

## RDS의 장접과 단점

### 장점

* 매니지드 서비스라는 점.
* 간단하게 데이터베이스 생성 가능.
* 온프레미스에서 데이터 이전이 쉽고 소프트웨어를 수정하지 않고 이전이 가능.
* EC2와 연동이 쉽고 같은 네트워크에 있으면 통신료 무료.

### 단점

* 사용자가 자유롭게 사용 불가.
* 제공하고 있는 DBMS의 종류나 버전이 한정.
* AWS가 업데이트를 자동으로 수행하여 편리한 반면 업데이트가 곤란한 시점에 수행되는 경우도 존재.