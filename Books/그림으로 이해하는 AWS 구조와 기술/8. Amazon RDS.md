# Amazon RDS(Relational Database Service)

* 관계형 데이터베이스 6종류의 제품을 클라우드에 최적화된 상태로 제공.
    * 메모리, 성능, I/O 등이 최적화.
* Amazon Aurora, PostgreSQL, MySQL, MariaDB, Oracle, SQL Server 지원.
* 제공 방식은 EC2처럼 VPC상에 인스턴스 형태로 구축하며 다양한 인스턴스 클래스 존재.
* EC2와 다른점은 매니지드 서비스로 AWS에 의해 업데이트등의 관리가 자동.
    * 백업처럼 번거로운 관리 작업도 자동화.
* DMS(Database Migration Server)로 기존 DB를 이전하거나 복제도 가능.

## 인스턴스 클래스

|용도|인스턴스 클래스|내용|
|---|---|---|
|표준|db.m5 등|범용적인 인스턴스 클래스|
|메모리 최적화|db.x1e|메모리를 많이 사용하는 애플리케이션에 최적화.<br/>일부 리전만 제공, 한국도 가능.|
|메모리 최적화|db.x1|메모리를 많이 사용하는 애플리케이션에 최적화.<br/>메모리 최대치가 db.x1e의 절반.|
|메모리 최적화|db.r5 등|네트워크와 EBS의 성능을 강화.<br/>AWS Nitro System을 사용.|
|버스트 성능|db.t3 등|CPU의 최대 사용률까지 버스트 성능으로 사용.|

* 인스턴스 클래스에 따라 지원하지 않는 DBMS나 버전도 존재.
* 데이터베이스 인스턴스는 VPC에 설치해야 함.

## RDS 요금

* DBMS에 따라 요금이 다름.
* DBMS는 무료와 유료가 있고 유료는 라이선스 사용료 인스턴스 요금에 포함되어서 부과.
* 스토리지 요금 + 데이터베이스 인스턴스 요금 + 백업 스토리지 요금 + 통신료

### 스토리지 요금

* 사용하고 있는 스토리지에 대한 요금.
* 실제 사용한 용량이 아닌 확보하고 있는 용량에 대해 과금.

### 데이터베이스 인스턴스 요금(DBMS 라이선스 요금 포함)

* EC2처럼 가동한 시간당 요금이 부과.
* 고성능 인스턴스일수록 요금이 비쌈.
* 이중화 구축 여부와 사용할 데이터베이스 엔진(DBMS)에 따라 요금이 다름.
* 다중 AZ로 구성하여 이중화하면 단일 AZ보다 약 2배 요금 부과.
* 유료 DBMS는 라이선스 비용까지 청구되어 오픈 소스보다 비쌈.

#### ※ 다중 AZ

* AZ란 가용 영역의 약자.
* 단일 AZ 구성은 한 곳에 가용 영역을 구축.
* 다중 AZ 구성은 여러 가용 영역에 구축하여 이중화 구성.
* 장애가 발생하여 중단되면 안 되는 서비스면 다중 AZ 구성 필요.

### 백업 스토리지 요금

* 데이터베이스 인스턴스 백업 가능. (스냅샷)
* 스냅샷은 백업 스토리지라고 하는 장소에 생성, 샤용 용량에 따라 요금 부과.
* 스냅샷 요금은 리전의 데이터베이스 스토리지 크기의 100%를 넘을 경우만 발생.
    * 20GB로 운영중일때 스냅샷의 용량이 20GB를 넘지 않으면 부과 X.

### 통신료

* 데이터베이스 인스턴스가 인터넷으로 통신할 경우 해당 전송량에 대해 부과.
* AZ 내에서만 통신하면 부과되지 않음.

## RDS의 장접과 단점

### 장점

* 매니지드 서비스라는 점.
* 간단하게 데이터베이스 생성 가능.
* 온프레미스에서 데이터 이전이 쉽고 소프트웨어를 수정하지 않고 이전이 가능.
* EC2와 연동이 쉽고 같은 네트워크에 있으면 통신료 무료.

### 단점

* 사용자가 자유롭게 사용 불가.
* 제공하고 있는 DBMS의 종류나 버전이 한정.
* AWS가 업데이트를 자동으로 수행하여 편리한 반면 업데이트가 곤란한 시점에 수행되는 경우도 존재.

<br/>

# RDS에서 지원하는 DBMS

## 지원하는 DBMS 목록

|DBMS(제공사)|내용|
|---|---|
|Amazon Aurora(Amazon)|MySQL이나 PostgreSQL과 호환 가능.<br/> AWS가 RDB.|
|PostgreSQL(PostgreSQL Global Development Group)|1970년대 개발된 Ingres라는 DB로부터 만들어진 오픈소스 DB.<br/>MySQL처럼 블로그나 쇼핑몰까지 폭넓게 사용.|
|MySQL(Oracle)|스웨덴의 MySQL AB가 개발하고 썬 마이크로시스템을 거쳐 오라클에 매수.<br/>소규모 시스템부터 대규모 시스템까 다양하게 사용.<br/>오픈 소스중 가장 인기가 많음.|
|MariaDB(Monty Program Ab)|MySQL 개발자가 스핀아웃(독립적으로 분리)하여 개발.<br/>기능은 MySQL과 거의 비슷, 라이선스가 GPL이라는 점이 다름.|
|Oracle Database(Oracle)|소규모 시스템부터 엔터프라이즈 시스템까지 폭넓게 지원.<br/>증권이나 금융 시스템에서 많이 사용.|
|Microsoft SQL Server(Microsoft)|오라클처럼 소규모부터 엔터프라이즈급까지 폭넓게 지원.<br/>윈도 서버용 소프트웨어였지만 현재는 리눅스에서도 동작.|

#### ※ GPL(General Public License) 라이선스

* 소프트웨어 개발자가 정해 놓은 사용 방법.
* 조건 안에서 사용하는 것을 전제로 무료로 사용 가능.

## Amazon Aurora

* MySQL이나 PostgreSQL과 호환되는 AWS가 만든 RDB.
* 요금이 조금 비싼 편이지만 견고하고 성능이 뛰어남.
* 일반적인 도구나 스냅샷으로 온프레미스 환경으로 이전 가능.
* SQL 문도 그대로 사용 가능하며 코드, 애플리케이션, 드라이버, 도구 등의 프로그램 및 SW 수정 필요 없음.
* AWS용으로 설계되어서 MySQL, PostgreSQL 보다 속도가 빠름.
* 매니지드 서비스로 안전하게 사용 가능.

#### ※ AWS에서 MySQL이나 PostgreSQL을 사용하는 방법

1. EC2에 설치.
1. RDS를 사용.
1. Amazon Aurora를 사용하는 방법.
    * DBMS를 변경할 떄 큰 문제가 없고, 높은 성능을 원할 경우 사용.
    * RDS로 이전할 때 최신 버전이나 평가판, 이전 버전은 지원하지 않을 수 있음.
        * EC2에 MySQL이나 PostgreSQL을 설치하여 이전.

<br/>

# RDS 사용 절차

### 1. AWS에 로그인

* 리전 선택, 관리 콘솔 접속.
* RDS 대시보드 접속.

### 2. DB 인스턴스 생성

* DB 생성.
* 엔진 선택.
* 템플릿 선택.
* DB 사양 지정.
* 상세 설정(DB 설정).

### 3. RDS에 접속

* EC2에서 RDS로 접속.
* DB 클라이언트(관리 도구)에서 접속

### 4. 데이터 입력

* 조회, 입력, 삭제 변경.



    


