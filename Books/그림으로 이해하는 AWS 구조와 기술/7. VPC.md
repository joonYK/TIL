# Amazon VPC(Virtual Private Cloud)

* AWS 계정 전용 가상 네트워크 서비스.
    * 네트워크와 서브넷 범위, 라우팅 테이블, 네트워크 게이트웨이 등 가상 네트워킹 환경 설정.
* AWS에서 제공하는 리소스만 설치 가능.
* EC2나 RDS의 경우 VPC 없이는 서버 생성 불가.

## VPC의 구성

* VPC 내에 서버를 설치하면 해당 네트워크에 소속됨.
* 별도 설정 없으면 VPC 자체는 격리된 네트워크가 됨.
* 외부와의 통신은 인터넷이나 회사 내 LAN과 연결 필요.

## 기능

* 가상 환경이기 때문에 물리적인 네트워크와 다른 점도 있지만 기본 개념은 같음.
* IPv4, IPv6 둘 다 사용 가능.

#### ※ 주요 기능

|항목|내용|
|---|---|
|CIDR 블록|서브넷이며 네트워크를 나눈 범위.<br/>VPC 생성시 네트워크 범위를 CIDR로 정하고 더 작은 서브넷으로 나눔.|
|서브넷 마스크|네트워크의 크기를 계산하는 값.<br/>CIDR은 서브넷 마스크의 표기법 중 하나.|
|가용 영역|서브넷이 구축된 물리적 장소.|
|인터넷 게이트웨이|인터넷 접속 출입구.<br/>VPC를 인터넷에 연결하지 않으면 불필요.|
|라우팅|어떤 데이터를 어디에 보낼지 조정.<Br/>게이트웨이와 라우팅으로 송수신 설정을 해야 VPC가 인터넷 접속 가능.<br/>|
|라우팅 테이블|라우팅에 대한 설정이 기록된 테이블.|
|보안 그룹|AWS가 제공하는 가상 방화벽.<br/>인스턴스 단위로 설정, 유입되는 데이터는 '거부'가 기본 설정.|
|네트워크 ACL|AWS가 제공하는 가상 방화벽으로 서브넷 단위로 설정.|

## VPC 네트워크의 특징과 라우팅 테이블

* VPC와 네트워크와 일반 네트워크의 큰 차이점은 라우터.
* VPC는 소프트웨어가 라우터 역할을 수행.
    * 라우팅 테이블 하나에 서브넷 여러 개를 설정 가능.
* 물리 서버는 LAN 케이블과 와이파이로 라우터와 연결, 클라우드는 라우팅 테이블로 연결.
* 일반적인 서브넷 사이의 통신은 라우터로 하지만, VPC의 경우는 라우터 없이 통신 가능.
* VPC 하나에 인터넷 게이트웨이 한 개만 설정 가능.
* 라우터와 인터넷 게이트웨이는 명시적인 IP 주소 부여 없음.

<br/>

# 사용

## 설정을 위해 꼭 필요한 확인 사항

### 1. 인터넷 연결 여부

* 인터넷 연결이 필요하면 인터넷 게이트웨이 설정 필요.

### 2. 오토 스케일링

* 서버가 자동으로 늘어나기 때문에 IP 주소를 많이 확보해야 함.

### 3. 보안 그룹과 네트워크 ACL

* 인스턴스 용도에 맞는 포트 설정 고려.
* 모든 포트가 닫힌 것이 기본 설정이기 때문에 기본 설정 변경 필요.
* 기본 VPC, 기본 서브넷과 보안 그룹을 제공해서, 잘 모르면 기본 VPC 사용.

## 사용 절차

### 1. AWS에 로그인

* 리전 선택 > 관리 콘솔 접속 > VPC 대시보드 접속.

### 2. VPC 생성

* VPC 이름을 정함.
* CIDR 블록에 네트워크 범위 설정.
* 테넌시(하드웨어의 점유 여부)를 선택.

### 3. 서브넷 설정

* 서브넷 이름을 정함.
* 대상 VPC 선택.
* 가용 영역 선택.
* CIDR 블록(서브넷)을 설정.

### 4. 인터넷 연결

* 인터넷 게이트웨이를 생성.
* 인터넷 게이트웨이와 VPC를 연결.
* 라우팅 설정(라우팅 테이블을 생성하고 설정).


