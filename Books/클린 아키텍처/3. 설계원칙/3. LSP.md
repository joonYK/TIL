# LSP(Liskov Substiution Principle, 리스코프 치환 원칙)

## 원칙 

LSP는 상위 타입을 하위 타입으로 치환할 수 있어야 한다는 원칙이다.

### 하위 타입

프로그램 P에서 이용하는 T 타입 객체의 모든 자리에 S 타입의 객체로 치환하더라도 P의 행위가 변하지 않는다면, S는 T의 하위 타입이라고 할 수 있다.

### 상속

LSP를 준수하지 못한다면, 잘못된 상속과 다형성을 사용하고 있다는 것이므로 결국 OCP도 준수하지 못하게 된다. 

## 대표적인 위반 사례

대표적인 예로 정사각형/직사각형 문제가 있다.

<img src="images/LSP_1.png" width="70%">

Rectangl의 높이와 너비는 서로 독립적으로 변경이 가능하지만, Square의 높이와 너비는 함께 변경되기 때문에 LSP가 성립되지 않는다.

```java
Rectangle r = new Square();
r.setW(5);
r.setH(2);
assert(r.area() == 10);
```

위의 코드를 실행하면 실패하게 된다. 실패를 막기 위해선 타입을 체크해야 하는데, 이렇게 되면 클라이언트의 행위가 사용하는 타입에 의존하게 되기 때문에 결국 타입을 서로 치환할 수 없게 된다.