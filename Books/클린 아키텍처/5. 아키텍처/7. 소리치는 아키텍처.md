# 소리치는 아키텍처

건물의 청사진을 살펴보고 있다고 상상한다. 이 청사진이 한 가족이 거주할 주택(거실, 현관, 부엌 등)을 그리고 있다면 이 아키텍처는 "집이야"라고 소리칠 것이다. 또는 도서관(독서 공간, 책장, 회의실 등)을 그려내고 있다면 이 아키텍처는 "도서관이야"라고 소리칠 것이다.
<br/>

애플리케이션의 상위 수준의 디렉토리 구조, 최상위 패키지에 담긴 소스 파일을 볼 때, 이 아키텍처가 "헬스 케어 시스템이야" 또는 "재고 관리 시스템이야"라고 소리치는지, 아니면 "스프링/하이버네이트야", "ASP야"라고 소리치고 있지는 않은지 확인이 필요하다.

<br/>

# 아키텍처의 테마

아키텍처는 프레임워크에 대한 것이 아니며, 아키텍처는 시스템의 유스케이스를 지원하는 구조이다.

* 아키텍처를 프레임워크로부터 제공받아서는 안 됨.
* 프레임워크는 사용하는 도구일 뿐, 아키텍처가 준수해야 할 대상이 아님.

<br/>

# 아키텍처의 목적

좋은 아키텍처는 프레임워크나 도구, 환경에 구애받지 않고 유스케이스를 지원하는 구조를 아무런 문제 없이 기술할 수 있다.

* 프레임워크, DB, 웹 서버나 기타 개발 환경 문제나 도구에 대한 결정은 미룰 수 있도록 만듦.
* 뿐만 아니라 결정을 쉽게 번복할 수 있도록 함.
* 좋은 아키텍처는 유스케이스에 중점을 두며, 지엽적인 관심사에 대한 결합을 분리.

## 웹은 아키텍처인가

웹은 아키텍처가 아닌 전달 매커니즘(입출력 장치)이며, 애플리케이션 아키텍처에서도 그와 같이 다뤄야 한다.

* 애플리케이션이 웹을 통해 전달된다는 것은 세부사항일 뿐, 시스템 구조를 지배하면 안 됨.

## 프레임워크는 도구일 뿐

프레임워크는 매우 강력하고 상당히 유용할 수 있다. 그러나 프레임워크를 너무 신봉하면 안되고 프레임워크가 모든 것을 하게 하자라는 태도를 취하지 말아야 한다. 

* 프레임워크를 면밀히 살펴보고 비판적으로 볼 줄 알아야 함.
* 프레임워크가 도움이 되겠지만 비용이 얼마나 드는지, 어떻게 사용할지, 사용하지 않으려면 어떻게 해야할지 등을 고민.
* 어떻게 하면 아키텍처를 유스케이스에 중점을 둔 채 그대로 보존할 수 있는지에 대한 고민.
* 프레임워크가 아키텍처의 중심을 차지하는 일을 막을 수 있는 전략이 필요.

# 테스트하기 쉬운 아키텍처

아키텍처가 유스케이스를 최우선으로 하고, 프레임워크와 적당한 거리를 둔다면, 프레임워크 없이 유스케이스 전부에 대해 단위 테스트를 할 수 있다.

* 엔티티 객체는 반드시 오래된 방식의 간단한 객체(plain old object)여야 함.
* 유스케이스 객체가 엔티티 객체를 조작해야 함.
* 프레임워크나 DB, 또는 다른 것들에 의존하면 안 됨.

# 결론

아키텍처는 시스템을 이야기해야 하며, 시스템에 적용된 프레임워크에 대해 얘기해선 안 된다.
