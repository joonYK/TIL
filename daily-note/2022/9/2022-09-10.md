# 대규모 서비스를 지탱하는 기술

## 대규모 데이터 처리의 어려운 점

데이터가 너무 많으면 메모리에 두고 사용하기가 힘들다. 대용량 데이터는 수백 GB에서 많게는 TB가 넘어가는데, 이  정도의 데이터들을 메모리에 수용해서 처리하기가 아직은 힘들다. 그래서 DB를 통해 디스크에 저장하고 검색해야 하는데, 디스크는 메모리에 비해 너무 느리다.

## 디스크의 속도

메모리는 마이크로초 단위로 포인터를 이동시켜서 메모리의 주소를 찾아 데이터 접근이 가능하다. 하지만 디스크의 구조는 원반이 겹겹이 쌓여있는 형태로, 원반의 곳곳에 데이터가 저장되어 있는 구조이며, 이 데이터를 읽는 헤드 부분이 존재한다.

데이터를 읽기 위해 헤드를 이동시키고 원반을 회전시켜야 하는데, 이런 물리적인 동작을 수반되어 디스크 탐색속도는 느려질 수밖에 없다. 그런데 만약 여기서 데이터가 원반에 흩어져서 배치되어 있는 정도가 크면 클수록 헤드의 이동과 원반 회전의 수도 그만큼 많아져서 탐색 속도는 더욱 느려질 것이다.

### 디스크가 데이터를 읽는 순서

1. 헤드를 원반 상의 바깥쪽 위치에서 원반 안쪽으로 옮김.
2. 원반을 회전시켜서 데이터를 헤드에 위치시켜줘야 함.
    * 원반은 항상 같은 방향으로 회전하는데, 데이터가 있는 원반의 위치가 헤드로부터 회전 방향으로 살짝이라도 지나버렸다면, 한 바퀴 더 회전시켜서 헤드에 위치시켜 줘야하는 비효율적인 면이 있음.

### OS 레벨에서의 연구

디스크의 느린 속도를 보완하기 위해 OS에서는 비슷한 데이터를 디스크의 같은 위치에 모아서 저장해 놓는다. 그리고 읽을 때 4KB 정도를 한꺼번에 읽어들이는데, 한 번의 디스크 회전으로 데이터를 많이 읽어서 처리하려고 한다.

# 회고

## 아쉬운 점

하루에 공부하는 시간이 현저히 부족하다는 생각이 든다. 그동안 추석 연휴가 있기도 했고, 가족과 함께 보낸 시간이 아까운건 아니지만 좀 더 공부에 시간을 투자했으면 하는 마음이 드는건 어쩔 수 없는거 같다. 공부를 하면 할수록 부족하다는 생각이 들기 때문인데, 이제 추석 연휴도 끝나가니 좀 더 공부에 시간을 투자해야겠다.

우선 오전 시간을 최대한 활용하기로 하고, 오후에 저녁시간을 기점으로 그 전이나 후의 시간대로 나누어서 하나를 아내와 보내고나면 나머지 하나는 공부하는데 사용하도록 해야겠다.