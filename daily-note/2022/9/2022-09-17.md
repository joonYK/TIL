# 대규모 서비스를 지탱하는 기술

## 캐시를 전제로 한 I/O 줄이는 방법

결국 I/O를 줄이기 위해서는 메모리 캐시를 고려해야 한다. 그래서 이 캐시를 고려해서 I/O에 대한 대책을 세우는 것이 가장 기본이며, 이 기본에는 2가지 포인트가 있다.

### 1. 다루고자 하는 데이터 규모에 주목

데이터 크기에 비해 물리 메모리 용량이 더 크다면 모든 데이터를 전부 캐싱해둘 수 있다는 점을 상기하자. 그러면 처음 캐싱할 때만 디스크 I/O가 발생하고 그 이후에는 I/O가 발생하지 않을 것이다.

그리고 데이터 압축을 고려해본다. 압축을 통해 데이터 크기를 줄일 수 있다면 메모리에 좀 더 캐싱해둘 수 있기 때문이다.

### 2. 경제적 비용과의 밸런스 고려

물리 메모리의 용량 대비 가격은 시간이 지날수록 내려간다. 그래서 최근에는 어느 정도 용량의 물리 메모리가 가격 대비 효율적인지를 판단해서 적절한 물리 메모리 용량을 서버에 사용해야 할 것이다.

만약 현재 사용하고 있는 물리 메모리보다 더 높은 용량의 메모리를 괜찮은 가격대로 구할 수 있다면, 물리 메모리를 교체하는 것만으로도 대규모 데이터를 다루는 문제를 좀 더 수월하게 해결할 수 있을 것이다.

## 캐시로 해결될 수 없는 규모라면 복수 서버로 확장하기

메모리를 늘려서 전부 캐시할 수 없다면 서버를 늘리는 방안을 생각해볼 수 있다. 특히 DB 서버의 경우에는 부하를 낮추기 위한 것만이 아닌 캐시 용량을 늘리기 위해서도 서버의 확장을 고려해볼 수 있다.<br/>
하지만 DB 서버의 경우 단순히 서버 대수만 늘린다고 해서 캐시 효율이 좋아지진 않는다. 똑같이 데이터를 복사해서 서버를 추가하면 기존 서버와 동일한 문제로 똑같이 캐시 용량이 부족해질 수 있기 때문이다. 
