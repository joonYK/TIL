# 배운 내용

## 동일한 요청이 여러번 들어오는 문제

예를 들어, 브라우저에서 물건을 구매하는 버튼을 마우스의 문제로 한번 클릭할것을 더블 클릭하는 경우가 있을 수 있다. 만약 이 문제에 대한 처리를 하지 않으면 클릭한 만큼 물건을 구매하게 되는 경우가 발생할 것이다.

### 핵심

일단 동일한 요청인지 아닌지에 대한 비교가 필요하기 떄문에 요청을 모아볼 수 있는 저장소가 필요하다. 그리고 요청의 바디 정보(구매자명, 결제금액 등에 대한 정보)에 대한 해시값과 해당 요청이 들어온 시간을 같이 저장해놓는다.

그래서 만약 동일 해시값이 존재한다면 시간을 체크해서 동일한 요청이라고 판단할만큼의 시간대인지 아닌지를 비교해본다. 여기서 동일한 요청일수도 있지만, 일부러 물건을 또 구매하려고 동일한 요청을 일부러 보낸것일수도 있기 때문에 시간값을 잘 설정해야 한다.

시간에 대한 설정은 테스트를 해보면서 정하면 좋을것 같긴 한데, 동일한 요청이 여러번 연속들어오는 경우는 1초보다는 짧은것으로 판단된다. 그래서 1초를 초과하지 않았을경우 동일한 요청이라고 판단하고 해당 요청은 무시한다.

### 서버가 한대

서버가 한대라면 HashMap을 사용해서 이곳을 저장소로 사용하면 된다.

### 서버가 여러대

서버가 여러대라면 각 서버별로 Map 인스턴스를 생성하는것이 아닌 요청 데이터들을 모아볼 수 있는 중간 저장소가 필요하다.
여기서는 빠르게 접근할 수 있는 인 메모리 DB인 레디스를 사용하는것이 좋다.

<br/>

# 회고

## 좋았던 점

이전까지는 면접에 참석하면 질문을 받았던거에 있어서 내가 몰랐던 부분에 대해 역을 질문하는시간에 물어볼 생각을 하지 못했었다. 그런데 오늘은 너무 궁금했던 나머지 해당 문제의 해결방법에 대해 물어봤었고 면접관분께서 친절하게 알려주셨다.

항상 면접에 대해 잘 말하지 못한 부분에 있어서는 끝나고나서 아쉬운 마음뿐이었는데, 이렇게 질문을 하고 답을 듣게되니 아쉬운 마음도 있지만 무언가를 또 배웠다는 생각에 기분이 마냥 나쁘지만은 않았다.

면접에 대한 경험 자체도 소중하지만, 면접을 통해 내가 몰랐던 부분을 좀 더 배워갈 수 있는 부분은 없는지 생각하면서 면접에 임해야겠다.

## 아쉬웠던 점

좋았던 점에서 몰랐던 문제에 대한 설명을 해주시긴 했지만 완전 100% 이해는 하지 못했고 레디스에 대해서도 제대로 알고있지 못해서 내가 최대한 이해할 수 있는 한도내에서 이해해야만 했다.

그래서 해당 내용에 대한 해결방법을 좀 더 찾아보고, 레디스에 대해서도 어떤식으로 데이터를 저장하고 가져오는지 어떤식으로 동작하는지에 대한 개념을 갖추고 다시 이 문제에 대해 바라봐야겠다.