# 클린 아키텍처

## 패키지 구조화의 유의사항 (캡슐화)

여러 패키지 구조화 방법이 존재하더라도, 자바의 public 과 같은 접근지시자를 남발한다면, 패키지는 그저 폴더처럼 연관된 파일들을 묶어놓는 매커니즘으로만 작동할 수 밖에 없다.

그래서 패키지를 사용해서 캡슐화와 은닉화의 이점을 살리지 못하고, 패키지의 구조화만 다르지 결국 아키텍처적으로는 동일한 형태가 된다. 그래서 결국 모든 구조화 방법들은 본질적으로 수평적 계층형 아키텍처를 표현하는 방식이 되어버린다.

그래서 public 지시자를 남발하지말고 패키지의 외부로 드러내야할것만 드러내고, 숨겨야할 것은 숨겨서 패키지 구조화를 통한 아키텍처를 드러낼 수 있도록 해야한다. 그러면 외부에서 해당 패키지의 무언가에 접근할 떄, 어떤것을 통해서 접근해야할지 명확해지고, 특정 클래스나 인터페이스만을 통해서 접근하도록 규율을 강제할 수 있다. 

### 1. 수평적 계층형 아키텍처

* 서비스와 리파지토리에서는 외부와 접촉하는 인터페이스만 드러내고, 구현체는 숨긴다.

### 2. 기능 기반 패키지

* 컨트롤러가 패키지로 들어올 수 있는 유일한 통로이므로 컨트롤러만 드러내야 하지만, 무조건 컨트롤러의 통해서만 접촉이 가능하기 때문에, 이것이 합당하지 않은지는 경우에 따라 다르다.
* 즉, 경우에 따라 다른 부분도 드러내야할지 말지를 결정해야 한다.

### 3. 포트와 어댑터

* 서비스 인터페이스와 도메인 조회를 위한 인터페이스는 외부의 접근이 필요하기 때문에 드러낸다.
* 서비스 구현체와 영속성 패키지의 구현체는 숨긴다.

### 4. 컴포넌트 기반 패키지

* 컨트롤러의 유입을 받는 컴포넌트 인터페이스만 드러내고, 컴포넌트 구현체와 영속성 관련 클래스나 인터페이스는 숨긴다.

